import {Injectable} from '@angular/core';
import {HttpClient, HttpResponse} from "@angular/common/http";
import {SERVER_API_URL} from "../../app.constants";
import {ContainerType} from "../../entities/enumerations/ContainerType.enum";
import {VulnerabilityAreaMgm} from "../../entities/vulnerability-area-mgm";
import {Observable} from "rxjs";

const QUESTIONNAIRE_STATUS_PLACEHOLDER = '{QUESTIONNAIRE_STATUS_ID}';

@Injectable()
export class VulnerabilityRadarService {

    private vulnerabilityRadarAPIUrl = SERVER_API_URL + 'api/chart/radar/vulnerability/' + QUESTIONNAIRE_STATUS_PLACEHOLDER;


    constructor(private http: HttpClient) {
    }

    public getVulnerabilityRadar(questionnaireStatusID: number, vulnerabilityAreas: VulnerabilityAreaMgm[]): Observable<HttpResponse<Map<number, Map<ContainerType, number>>>> {
        return this.http.post<Map<number, Map<ContainerType, number>>>(
            this.vulnerabilityRadarAPIUrl
                .replace(QUESTIONNAIRE_STATUS_PLACEHOLDER, String(questionnaireStatusID)), vulnerabilityAreas, {observe: 'response'});
    }

    public convertResponse(){

    }
}
