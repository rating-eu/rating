<ng-container>
    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <h2>
                        <a href="javascript:void(0);" class="collapse-link">Assessment Area</a>
                    </h2>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <!--<div *ngIf="vulnerabilityAreas && vulnerabilityAreas.length && vulnerabilityAreasToggleMap">
                <ng-container *ngFor="let area of vulnerabilityAreas">
                    <mat-slide-toggle class="mx-1" *ngIf="vulnerabilityAreasToggleMap.has(area.id)"
                                      [checked]="vulnerabilityAreasToggleMap.get(area.id)"
                                      (change)="toggleChange(area, $event)"
                    >
                        {{area.name | titlecase}}
                    </mat-slide-toggle>
                </ng-container>
            </div>-->

            <div class="row mb-3">
                <div class="col-md-12">
                    <div *ngIf="radarChartDataSets && radarChartDataSets.length" style="display: block">
                        <canvas baseChart
                                [datasets]="radarChartDataSets"
                                [options]="radarChartOptions"
                                [labels]="radarChartLabels"
                                [chartType]="radarChartType">
                        </canvas>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div *ngIf="vulnerabilityAreas && containerTypes && data" class="table-responsive">
                        <table class="table table-striped">
                            <thead class="thead-light">
                            <tr>
                                <th class="text-center"></th>
                                <th *ngFor="let area of vulnerabilityAreas" class="text-center"
                                    style="font-size: medium;">{{area.name}}</th>
                                <!--<th class="text-center">%</th>-->
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let containerType of containerTypes" class="thead-light">
                                <th *ngIf="containerType!==containerTypeEnum.IT"
                                    class="text-left">{{containerType | replace:'_':' ' | titlecase}}</th>
                                <th *ngIf="containerType===containerTypeEnum.IT"
                                    class="text-left">{{containerType | replace:'_':' '}}</th>
                                <td *ngFor="let area of vulnerabilityAreas"
                                    class="text-center">{{data.get(area.id).get(containerType)}}&nbsp;&nbsp;
                                    <i class="fas fa-info-circle pointer"
                                       style="color: #4FBDE9;"
                                    [routerLink]="['/evaluate-weakness/questionnaires/SELFASSESSMENT/questionnaire/container/' + containerType + '/area/' + area.id]"></i>
                                </td>
                                <!--<td class="text-center">{{data.get(-1).get(containerType) | percent}}</td>-->
                            </tr>
                            <tr class="thead-light">
                                <th class="text-center">%</th>
                                <!--Note that the Intangible container is used to store the total vulnerability % of each area-->
                                <td *ngFor="let area of vulnerabilityAreas"
                                    class="text-center align-middle">
                                    <mat-progress-spinner [diameter]="50" style="margin: 0 auto;"
                                                          [ngClass]="{
                                              'low': data.get(area.id).get(containerTypeEnum.INTANGIBLE) > 0 && data.get(area.id).get(containerTypeEnum.INTANGIBLE) <= 0.2,
                                              'low-medium': data.get(area.id).get(containerTypeEnum.INTANGIBLE) > 0.2 && data.get(area.id).get(containerTypeEnum.INTANGIBLE) <= 0.4,
                                              'medium': data.get(area.id).get(containerTypeEnum.INTANGIBLE) > 0.4 && data.get(area.id).get(containerTypeEnum.INTANGIBLE) <= 0.6,
                                              'medium-high': data.get(area.id).get(containerTypeEnum.INTANGIBLE) > 0.6 && data.get(area.id).get(containerTypeEnum.INTANGIBLE) <= 0.8,
                                              'high': data.get(area.id).get(containerTypeEnum.INTANGIBLE) > 0.8 && data.get(area.id).get(containerTypeEnum.INTANGIBLE) <= 1
                                              }"
                                                          [value]="data.get(area.id).get(containerTypeEnum.INTANGIBLE) * 100"
                                                          matTooltip="Total Vulnerability"
                                                          [matTooltipPosition]="'above'"
                                    >
                                    </mat-progress-spinner>
                                    <div style="top:-35px; z-index:2;position:relative;">
                                        {{data.get(area.id).get(containerTypeEnum.INTANGIBLE) | percent}}
                                    </div>
                                </td>
                                <!--<td></td>-->
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</ng-container>
