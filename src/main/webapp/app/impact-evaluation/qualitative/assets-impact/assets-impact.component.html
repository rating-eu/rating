<div class="row">
    <div class="col-md-12">
        <p>
            Choose the impact of your assets in case of attack.
        </p>

        <mat-accordion>
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Tangible Assets
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <mat-tab-group>
                    <div *ngFor="let category of tangibleCategories">
                        <mat-tab *ngIf="myAssetsByCategoriesMap.get(category.id)?.length > 0" label="{{category.name}}">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th scope="col">Asset</th>
                                    <th scope="col">#Indirect Assets</th>
                                    <th scope="col">#Related Costs</th>
                                    <th scope="col">Criticality</th>
                                    <th scope="col">Priority</th>
                                </tr>
                                </thead>
                                <tbody>
                                <ng-container
                                    *ngFor="let myAsset of myAssetsByCategoriesMap.get(category.id)">
                                    <tr>
                                        <th scope="row">{{myAsset.asset.name}}</th>
                                        <td>{{myAssetsDTOsByIDMap.get(myAsset.id)?.indirectAssets.length}}</td>
                                        <td>{{myAssetsDTOsByIDMap.get(myAsset.id)?.attackCosts.length}}</td>
                                        <td>{{myAssetsDTOsByIDMap.get(myAsset.id)?.criticality}}</td>
                                        <td>
                                            <select [(ngModel)]="myAsset.ranking">
                                                <option *ngFor="let level of priorities; let i = index"
                                                        [ngValue]="i+1">{{level}}</option>
                                            </select>
                                        </td>
                                    </tr>
                                </ng-container>
                                </tbody>
                            </table>
                        </mat-tab>
                    </div>
                </mat-tab-group>
            </mat-expansion-panel>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Intangible Assets
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-tab-group>
                    <div *ngFor="let category of intangibleCategories">
                        <mat-tab *ngIf="myAssetsByCategoriesMap.get(category.id)?.length > 0" label="{{category.name}}">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th scope="col">Asset</th>
                                    <th scope="col">#Indirect Assets</th>
                                    <th scope="col">#Related Costs</th>
                                    <th scope="col">Criticality</th>
                                    <th scope="col">Priority</th>
                                </tr>
                                </thead>
                                <tbody>
                                <ng-container
                                    *ngFor="let myAsset of myAssetsByCategoriesMap.get(category.id)">
                                    <tr>
                                        <th scope="row">{{myAsset.asset.name}}</th>
                                        <td>{{myAssetsDTOsByIDMap.get(myAsset.id)?.indirectAssets.length}}</td>
                                        <td>{{myAssetsDTOsByIDMap.get(myAsset.id)?.attackCosts.length}}</td>
                                        <td>{{myAssetsDTOsByIDMap.get(myAsset.id)?.criticality}}</td>
                                        <td>
                                            <select [(ngModel)]="myAsset.ranking">
                                                <option *ngFor="let level of priorities; let i = index"
                                                        [ngValue]="i+1">{{level}}</option>
                                            </select>
                                        </td>
                                    </tr>
                                </ng-container>
                                </tbody>
                            </table>
                        </mat-tab>
                    </div>
                </mat-tab-group>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
    <div class="col-md-12 mt-3 mb-5">

        <button class="btn btn-primary float-right" (click)="saveMyAssets()">Save</button>

        <button style="margin-left: 10px"
                (click)="previousState()"
                class="btn btn-light float-right">
            <span class="fa fa-arrow-left"></span>&nbsp;<span jhiTranslate="entity.action.back"> Back</span>
        </button>
    </div>
</div>


